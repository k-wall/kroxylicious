#
# Copyright Kroxylicious Authors.
#
# Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0
#

id: deploy_a_strimzi_cluster
satisfies: have_a_target_kafka_cluster
prereqs:
  - ref: have_a_kubectl
  - ref: deploy_strimzi_operator
procedure:
  - exec:
      command: kubectl apply -n kafka -f https://strimzi.io/examples/latest/kafka/kafka-single-node.yaml
      undo: kubectl delete -n kafka -f https://strimzi.io/examples/latest/kafka/kafka-single-node.yaml
  - exec:
      command: kubectl wait -n kafka kafka/my-cluster --for=condition=Ready --timeout=300s
      timeout: 305s
