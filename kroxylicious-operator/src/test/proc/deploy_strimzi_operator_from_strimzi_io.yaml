#
# Copyright Kroxylicious Authors.
#
# Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0
#

id: deploy_strimzi_operator_from_strimzi_io
satisfies: deploy_strimzi_operator
prereqs:
  - ref: have_a_kubectl
procedure:
  - exec:
      command: kubectl create namespace kafka
      undo: kubectl delete namespace kafka
  - exec:
      command: kubectl create -n kafka -f https://strimzi.io/install/latest?namespace=kafka
      undo: kubectl delete -n kafka -f https://strimzi.io/install/latest?namespace=kafka
  - exec:
      command: kubectl wait -n kafka deployment/strimzi-cluster-operator --for=condition=Available=True --timeout=300s
      timeout: 305s
